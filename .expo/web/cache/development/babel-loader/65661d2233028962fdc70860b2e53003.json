{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport React, { useState } from 'react';\nimport Easing from \"react-native-web/dist/exports/Easing\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport AuthContext from \"./../store/auth\";\nimport API from \"./../services/api\";\nimport User from \"./../services/user\";\nimport { createStackNavigator } from \"@react-navigation/stack\";\nimport { createDrawerNavigator } from \"@react-navigation/drawer\";\nimport { Language } from \"../constants\";\nimport config from \"../config\";\n\nimport PublicAppStack from \"./VendorStacks/PublicAppStack\";\nimport AuthenticatedAppStack from \"./VendorStacks/AuthenticatedAppStack\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar Stack = createStackNavigator();\nexport default function App(_ref) {\n  var navigation = _ref.navigation;\n  var _React$useReducer = React.useReducer(function (prevState, action) {\n      switch (action.type) {\n        case 'RESTORE_TOKEN':\n          return _objectSpread(_objectSpread({}, prevState), {}, {\n            userToken: action.token,\n            isLoading: false\n          });\n        case 'SIGN_IN':\n          return _objectSpread(_objectSpread({}, prevState), {}, {\n            isSignout: false,\n            userToken: action.token\n          });\n        case 'SIGN_OUT':\n          return _objectSpread(_objectSpread({}, prevState), {}, {\n            isSignout: true,\n            userToken: null\n          });\n      }\n    }, {\n      isLoading: true,\n      isSignout: false,\n      userToken: null\n    }),\n    _React$useReducer2 = _slicedToArray(_React$useReducer, 2),\n    state = _React$useReducer2[0],\n    dispatch = _React$useReducer2[1];\n  React.useEffect(function () {\n    var bootstrapAsync = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        var userToken;\n        config.DRIVER_APP = false;\n        config.VENDOR_APP = true;\n        try {\n          userToken = yield AsyncStorage.getItem('token');\n        } catch (e) {\n        }\n\n        dispatch({\n          type: 'RESTORE_TOKEN',\n          token: userToken\n        });\n      });\n      return function bootstrapAsync() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    bootstrapAsync();\n  }, []);\n  var authContext = React.useMemo(function () {\n    return {\n      signIn: function () {\n        var _signIn = _asyncToGenerator(function* (data) {\n          API.loginUser(data.email, data.password, data.expoPushToken, function (responseJson) {\n            console.log(JSON.stringify(responseJson));\n            if (responseJson.status) {\n              User.setLoggedInUser(responseJson, function () {\n                dispatch({\n                  type: 'SIGN_IN',\n                  token: responseJson.token\n                });\n              });\n            } else {\n              Toast.show({\n                type: 'error',\n                text2: responseJson.message ? responseJson.message : responseJson.errMsg\n              });\n            }\n          });\n        });\n        function signIn(_x) {\n          return _signIn.apply(this, arguments);\n        }\n        return signIn;\n      }(),\n      signOut: function () {\n        var _signOut = _asyncToGenerator(function* (data) {\n          User.logout(function () {\n            dispatch({\n              type: 'SIGN_OUT'\n            });\n          });\n        });\n        function signOut(_x2) {\n          return _signOut.apply(this, arguments);\n        }\n        return signOut;\n      }(),\n      signUp: function () {\n        var _signUp = _asyncToGenerator(function* (data) {\n          API.registerUser(data.name, data.email, data.password, data.phone, function (responseJson) {\n            console.log(JSON.stringify(responseJson));\n            if (responseJson.status) {\n              User.logout(function () {\n                dispatch({\n                  type: 'SIGN_OUT'\n                });\n                Toast.show({\n                  type: 'error',\n                  text2: Language.VendorCreated\n                });\n              });\n            } else {\n              Toast.show({\n                type: 'error',\n                text2: JSON.stringify(responseJson.errMsg)\n              });\n            }\n          });\n        });\n        function signUp(_x3) {\n          return _signUp.apply(this, arguments);\n        }\n        return signUp;\n      }()\n    };\n  }, []);\n  return _jsx(AuthContext.Provider, {\n    value: authContext,\n    children: _jsx(Stack.Navigator, {\n      screenOptions: {\n        headerShown: false\n      },\n      children: _jsx(Stack.Screen, {\n        name: \"App\",\n        options: {},\n        component: state.userToken == null ? PublicAppStack : AuthenticatedAppStack\n      })\n    })\n  });\n}","map":{"version":3,"names":["React","useState","AsyncStorage","AuthContext","API","User","createStackNavigator","createDrawerNavigator","Language","config","PublicAppStack","AuthenticatedAppStack","Stack","App","navigation","useReducer","prevState","action","type","userToken","token","isLoading","isSignout","state","dispatch","useEffect","bootstrapAsync","DRIVER_APP","VENDOR_APP","getItem","e","authContext","useMemo","signIn","data","loginUser","email","password","expoPushToken","responseJson","console","log","JSON","stringify","status","setLoggedInUser","Toast","show","text2","message","errMsg","signOut","logout","signUp","registerUser","name","phone","VendorCreated","headerShown"],"sources":["C:/Users/munya/OneDrive/Desktop/.EXE/app2/navigation/Screens.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Easing, Animated} from \"react-native\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport AuthContext from './../store/auth'\nimport API from \"./../services/api\"\nimport User from './../services/user';\n\n\nimport { createStackNavigator } from \"@react-navigation/stack\";\nimport { createDrawerNavigator } from \"@react-navigation/drawer\";\n\nimport { Language } from '../constants'\nimport config from '../config';\n\n//Stacks\nimport PublicAppStack from './VendorStacks/PublicAppStack';\nimport AuthenticatedAppStack from './VendorStacks/AuthenticatedAppStack';\n\nconst Stack = createStackNavigator();\n\n\nexport default function App({ navigation }) {\n  const [state, dispatch] = React.useReducer(\n    (prevState, action) => {\n      switch (action.type) {\n        case 'RESTORE_TOKEN':\n          return {\n            ...prevState,\n            userToken: action.token,\n            isLoading: false,\n          };\n        case 'SIGN_IN':\n          return {\n            ...prevState,\n            isSignout: false,\n            userToken: action.token,\n          };\n        case 'SIGN_OUT':\n          return {\n            ...prevState,\n            isSignout: true,\n            userToken: null,\n          };\n      }\n    },\n    {\n      isLoading: true,\n      isSignout: false,\n      userToken: null,\n    }\n  );\n\n  React.useEffect(() => {\n    // Fetch the token from storage then navigate to our appropriate place\n    const bootstrapAsync = async () => {\n      let userToken;\n      config.DRIVER_APP=false;\n      config.VENDOR_APP=true;\n\n      try {\n        userToken = await AsyncStorage.getItem('token');\n      } catch (e) {\n        // Restoring token failed\n      }\n\n      // After restoring token, we may need to validate it in production apps\n\n      // This will switch to the App screen or Auth screen and this loading\n      // screen will be unmounted and thrown away.\n      dispatch({ type: 'RESTORE_TOKEN', token: userToken });\n    };\n\n    bootstrapAsync();\n  }, []);\n\n  const authContext = React.useMemo(\n    () => ({\n      signIn: async data => {\n        API.loginUser(data.email,data.password,data.expoPushToken,(responseJson)=>{\n          console.log(JSON.stringify(responseJson));\n           if(responseJson.status){\n             //User ok\n             User.setLoggedInUser(responseJson,()=>{\n              dispatch({ type: 'SIGN_IN', token: responseJson.token });\n              \n             })\n           }else{\n             //Not ok\n             Toast.show({\n              type: 'error',\n              text2: responseJson.message?responseJson.message:responseJson.errMsg\n            });\n           }\n         });\n      },\n      signOut: async data => {\n        User.logout(()=>{\n          dispatch({ type: 'SIGN_OUT' })\n        })\n      },\n      signUp: async data => {\n        API.registerUser(data.name,data.email,data.password,data.phone,(responseJson)=>{\n          console.log(JSON.stringify(responseJson));\n           if(responseJson.status){\n              //User ok - but needs admin approval\n              User.logout(()=>{\n                dispatch({ type: 'SIGN_OUT' })\n                Toast.show({\n                  type: 'error',\n                  text2: Language.VendorCreated\n                });\n                \n              })\n              \n              \n               \n           }else{\n             //Not ok\n             Toast.show({\n              type: 'error',\n              text2: JSON.stringify(responseJson.errMsg)\n            });\n           }\n           \n           \n         });\n\n\n        \n      },\n    }),\n    []\n  );\n\n\n\n  return (\n    <AuthContext.Provider value={authContext}>\n      <Stack.Navigator screenOptions={{headerShown: false}}>\n        <Stack.Screen name=\"App\" options={{}} component={state.userToken == null ? PublicAppStack : AuthenticatedAppStack} />\n      </Stack.Navigator>\n    </AuthContext.Provider>\n  );\n}\n\n\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}