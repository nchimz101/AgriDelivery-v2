{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport APICaller from \"./api_callers\";\nimport config from \"./../config\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nfunction loginUser(email, password, expoPushToken, callback) {\n  var link = 'client/auth/gettoken';\n  if (config.DRIVER_APP) {\n    link = 'driver/auth/gettoken';\n  }\n  if (config.VENDOR_APP) {\n    link = 'vendor/auth/gettoken';\n  }\n  var loginData = {\n    email: email,\n    password: password\n  };\n  if (expoPushToken.length > 3) {\n    loginData.expotoken = expoPushToken;\n  }\n  APICaller.publicAPI('POST', link, loginData, function (response) {\n    setSettings();\n    callback(response);\n  }, function (error) {\n    alert(error);\n  });\n}\nexports.loginUser = loginUser;\n\nfunction registerUser(name, email, password, phone, callback) {\n  var data = {\n    name: name,\n    email: email,\n    password: password,\n    phone: phone,\n    app_secret: config.APP_SECRET\n  };\n  var link = 'client/auth/register';\n  if (config.DRIVER_APP) {\n    link = 'driver/auth/register';\n  }\n  if (config.VENDOR_APP) {\n    link = 'vendor/auth/register';\n    data.vendor_name = name;\n  }\n  APICaller.publicAPI('POST', link, data, function (response) {\n    setSettings();\n    callback(response);\n  }, function (error) {\n    console.log(error);\n    alert(error);\n  });\n}\nexports.registerUser = registerUser;\n\nfunction setSettings() {\n  return _setSettings.apply(this, arguments);\n}\nfunction _setSettings() {\n  _setSettings = _asyncToGenerator(function* () {\n    APICaller.authAPI('GET', 'client/settings', {}, function () {\n      var _ref4 = _asyncToGenerator(function* (response) {\n        yield AsyncStorage.setItem('settings', JSON.stringify(response));\n      });\n      return function (_x8) {\n        return _ref4.apply(this, arguments);\n      };\n    }(), function (error) {\n      alert(error);\n    });\n  });\n  return _setSettings.apply(this, arguments);\n}\nexports.getNotifications = function () {\n  var _ref = _asyncToGenerator(function* (callback) {\n    APICaller.authAPI('GET', 'client/notifications', {}, callback, function (error) {\n      alert(error);\n    });\n  });\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexports.updateOrderStatus = function () {\n  var _ref2 = _asyncToGenerator(function* (order_id, status_slug, comment, callback) {\n    var statuses = {\n      \"just_created\": \"1\",\n      \"accepted_by_admin\": \"2\",\n      \"accepted_by_restaurant\": \"3\",\n      \"assigned_to_driver\": \"4\",\n      \"prepared\": \"5\",\n      \"picked_up\": \"6\",\n      \"delivered\": \"7\",\n      \"rejected_by_admin\": \"8\",\n      \"rejected_by_restaurant\": \"9\",\n      \"updated\": \"10\",\n      \"closed\": \"11\",\n      \"rejected_by_driver\": \"12\",\n      \"accepted_by_driver\": \"13\"\n    };\n    var mode = config.DRIVER_APP ? \"driver\" : \"vendor\";\n    APICaller.authAPI('GET', mode + '/orders/updateorderstatus/' + order_id + \"/\" + statuses[status_slug], {\n      \"comment\": comment\n    }, callback, function (error) {\n      alert(error);\n    });\n  });\n  return function (_x2, _x3, _x4, _x5) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexports.deactivateUser = function () {\n  var _ref3 = _asyncToGenerator(function* (callback, eCallback) {\n    APICaller.authAPI('GET', 'client/auth/deactivate', {}, callback, eCallback);\n  });\n  return function (_x6, _x7) {\n    return _ref3.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["APICaller","config","AsyncStorage","loginUser","email","password","expoPushToken","callback","link","DRIVER_APP","VENDOR_APP","loginData","length","expotoken","publicAPI","response","setSettings","error","alert","exports","registerUser","name","phone","data","app_secret","APP_SECRET","vendor_name","console","log","authAPI","setItem","JSON","stringify","getNotifications","updateOrderStatus","order_id","status_slug","comment","statuses","mode","deactivateUser","eCallback"],"sources":["C:/Users/munya/OneDrive/Desktop/.EXE/app2/services/common_api.js"],"sourcesContent":["import APICaller from './api_callers';\nimport config from \"./../config\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\n/**\n * Login user\n * @param {*} email \n * @param {*} password \n * @param {*} callback \n */\nfunction loginUser(email,password,expoPushToken,callback){\n    var link='client/auth/gettoken';\n    if(config.DRIVER_APP){\n      link='driver/auth/gettoken';\n    }\n    if(config.VENDOR_APP){\n      link='vendor/auth/gettoken';\n    }\n\n    var loginData={\n      email:email,\n      password:password\n     };\n     if(expoPushToken.length>3){\n      loginData.expotoken=expoPushToken;\n     }\n\n  \n    APICaller.publicAPI('POST',link,loginData,(response)=>{\n        setSettings();\n        callback(response)\n    },(error)=>{alert(error)});\n   }\nexports.loginUser=loginUser;\n\n/**\n * Register user / vendor account\n * @param {*} name \n * @param {*} email \n * @param {*} password \n * @param {*} phone \n * @param {*} callback \n */\nfunction registerUser(name,email,password,phone,callback){\n    const data = { \n      name: name,\n      email:email,\n      password:password,\n      phone:phone,\n      app_secret:config.APP_SECRET,\n    };\n  \n    var link='client/auth/register';\n    if(config.DRIVER_APP){\n      link='driver/auth/register';\n    }\n    if(config.VENDOR_APP){\n      link='vendor/auth/register';\n      data.vendor_name=name;\n    }\n    APICaller.publicAPI('POST',link,data,(response)=>{\n        setSettings();\n        callback(response)\n    },(error)=>{\n      console.log(error);\n      alert(error)\n    })\n  \n}\nexports.registerUser=registerUser;\n\n/**\n * Set setting\n */\nasync function setSettings(){\n    APICaller.authAPI('GET','client/settings',{},async (response)=>{\n      await AsyncStorage.setItem('settings',JSON.stringify(response));\n    },(error)=>{alert(error)})\n}\n\n/**\n * getNotifications\n * @param {*} callback \n */\nexports.getNotifications=async (callback)=>{APICaller.authAPI('GET','client/notifications',{},callback,(error)=>{alert(error)})}\n   \n\n/**\n * Update orders status\n * @param {*} order_id \n * @param {*} status_slug \n * @param {*} comment \n * @param {*} callback \n */\nexports.updateOrderStatus=async (order_id,status_slug,comment,callback)=>{\n    var statuses={\n        \"just_created\":\"1\",\n        \"accepted_by_admin\":\"2\",\n        \"accepted_by_restaurant\":\"3\",\n        \"assigned_to_driver\":\"4\",\n        \"prepared\":\"5\",\n        \"picked_up\":\"6\",\n        \"delivered\":\"7\",\n        \"rejected_by_admin\":\"8\",\n        \"rejected_by_restaurant\":\"9\",\n        \"updated\":\"10\",\n        \"closed\":\"11\",\n        \"rejected_by_driver\":\"12\",\n        \"accepted_by_driver\":\"13\"\n    }\n    var mode=config.DRIVER_APP?\"driver\":\"vendor\";\n    APICaller.authAPI('GET',mode+'/orders/updateorderstatus/'+order_id+\"/\"+statuses[status_slug],{\"comment\":comment},callback,(error)=>{alert(error)})\n};\n\n\nexports.deactivateUser=async (callback,eCallback)=>{APICaller.authAPI('GET','client/auth/deactivate',{},callback,eCallback)};"],"mappings":"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"},"metadata":{},"sourceType":"module"}